<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>é¡¹ç›®æ¶æ„å¯è§†åŒ– â€” æƒ…æ„Ÿåˆ†æç³»ç»Ÿ</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
<style>
  /* â”€â”€â”€ CSS Variables â”€â”€â”€ */
  :root {
    --bg-primary: #F8F6F1;
    --bg-card: #FFFFFF;
    --bg-warm: #FFF9F0;
    --text-primary: #1A1A2E;
    --text-secondary: #4A4A6A;
    --text-muted: #8E8EA0;
    --accent-coral: #FF6B6B;
    --accent-teal: #4ECDC4;
    --accent-gold: #FFD93D;
    --accent-lavender: #A78BFA;
    --accent-sky: #38BDF8;
    --accent-rose: #FB7185;
    --accent-emerald: #34D399;
    --accent-amber: #FBBF24;
    --border-light: rgba(0,0,0,0.06);
    --shadow-soft: 0 2px 20px rgba(0,0,0,0.04), 0 0 0 1px rgba(0,0,0,0.03);
    --shadow-hover: 0 8px 40px rgba(0,0,0,0.08), 0 0 0 1px rgba(0,0,0,0.04);
    --shadow-glow-coral: 0 4px 24px rgba(255,107,107,0.2);
    --shadow-glow-teal: 0 4px 24px rgba(78,205,196,0.2);
    --shadow-glow-lavender: 0 4px 24px rgba(167,139,250,0.2);
    --radius: 16px;
    --radius-sm: 10px;
    --radius-lg: 24px;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Noto Sans SC', sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* â”€â”€â”€ Background Texture â”€â”€â”€ */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background:
      radial-gradient(ellipse 60% 40% at 15% 20%, rgba(255,107,107,0.06), transparent),
      radial-gradient(ellipse 50% 50% at 85% 80%, rgba(78,205,196,0.06), transparent),
      radial-gradient(ellipse 40% 30% at 50% 50%, rgba(167,139,250,0.04), transparent);
    pointer-events: none;
    z-index: 0;
  }

  /* â”€â”€â”€ Header â”€â”€â”€ */
  .page-header {
    position: relative;
    z-index: 10;
    padding: 48px 48px 32px;
    max-width: 1400px;
    margin: 0 auto;
  }

  .page-header h1 {
    font-size: 32px;
    font-weight: 900;
    letter-spacing: -0.5px;
    color: var(--text-primary);
    margin-bottom: 8px;
  }

  .page-header h1 span {
    background: linear-gradient(135deg, var(--accent-coral), var(--accent-lavender));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .page-header p {
    font-size: 15px;
    color: var(--text-muted);
    font-weight: 400;
    line-height: 1.6;
  }

  /* â”€â”€â”€ Tab Navigation â”€â”€â”€ */
  .tab-nav {
    position: relative;
    z-index: 10;
    display: flex;
    gap: 8px;
    padding: 0 48px;
    max-width: 1400px;
    margin: 0 auto 32px;
  }

  .tab-btn {
    padding: 10px 22px;
    border: none;
    background: transparent;
    font-family: 'Noto Sans SC', sans-serif;
    font-size: 14px;
    font-weight: 500;
    color: var(--text-muted);
    cursor: pointer;
    border-radius: var(--radius-sm);
    transition: all 0.25s ease;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .tab-btn:hover {
    background: rgba(0,0,0,0.04);
    color: var(--text-secondary);
  }

  .tab-btn.active {
    background: var(--text-primary);
    color: #fff;
    box-shadow: 0 2px 12px rgba(26,26,46,0.2);
  }

  .tab-btn .tab-icon {
    font-size: 16px;
  }

  /* â”€â”€â”€ Content Area â”€â”€â”€ */
  .content {
    position: relative;
    z-index: 10;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 48px 80px;
  }

  .tab-panel {
    display: none;
    animation: fadeUp 0.4s ease;
  }

  .tab-panel.active {
    display: block;
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(16px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* â”€â”€â”€ Architecture Graph (SVG Canvas) â”€â”€â”€ */
  .graph-container {
    background: var(--bg-card);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-soft);
    overflow: hidden;
    position: relative;
  }

  .graph-canvas {
    width: 100%;
    height: 680px;
    display: block;
  }

  /* â”€â”€â”€ Node Tooltip â”€â”€â”€ */
  .node-tooltip {
    position: absolute;
    background: var(--bg-card);
    border-radius: var(--radius);
    box-shadow: var(--shadow-hover);
    padding: 20px 24px;
    max-width: 340px;
    pointer-events: none;
    opacity: 0;
    transform: translateY(8px);
    transition: all 0.2s ease;
    z-index: 100;
    border: 1px solid var(--border-light);
  }

  .node-tooltip.visible {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }

  .node-tooltip h4 {
    font-size: 15px;
    font-weight: 700;
    margin-bottom: 6px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .node-tooltip .tag {
    font-size: 11px;
    font-weight: 600;
    padding: 2px 8px;
    border-radius: 6px;
    display: inline-block;
  }

  .node-tooltip p {
    font-size: 13px;
    color: var(--text-secondary);
    line-height: 1.65;
  }

  .node-tooltip .analogy {
    margin-top: 10px;
    padding: 10px 14px;
    background: var(--bg-warm);
    border-radius: var(--radius-sm);
    font-size: 13px;
    color: var(--accent-coral);
    font-weight: 500;
    line-height: 1.5;
  }

  /* â”€â”€â”€ Layered Architecture â”€â”€â”€ */
  .layers-section {
    display: flex;
    flex-direction: column;
    gap: 0;
  }

  .arch-layer {
    background: var(--bg-card);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-soft);
    padding: 32px 36px;
    position: relative;
    transition: all 0.3s ease;
    cursor: pointer;
    border: 2px solid transparent;
  }

  .arch-layer:hover {
    box-shadow: var(--shadow-hover);
    transform: translateY(-2px);
  }

  .arch-layer.layer-user { border-left: 4px solid var(--accent-sky); }
  .arch-layer.layer-frontend { border-left: 4px solid var(--accent-teal); }
  .arch-layer.layer-backend { border-left: 4px solid var(--accent-lavender); }
  .arch-layer.layer-data { border-left: 4px solid var(--accent-coral); }
  .arch-layer.layer-ai { border-left: 4px solid var(--accent-gold); }

  .layer-connector {
    display: flex;
    justify-content: center;
    padding: 8px 0;
  }

  .layer-connector svg {
    display: block;
  }

  .layer-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 16px;
  }

  .layer-icon {
    width: 48px;
    height: 48px;
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    flex-shrink: 0;
  }

  .layer-icon.icon-user { background: linear-gradient(135deg, #DBEAFE, #BFDBFE); }
  .layer-icon.icon-frontend { background: linear-gradient(135deg, #CCFBF1, #99F6E4); }
  .layer-icon.icon-backend { background: linear-gradient(135deg, #EDE9FE, #DDD6FE); }
  .layer-icon.icon-data { background: linear-gradient(135deg, #FFE4E6, #FECDD3); }
  .layer-icon.icon-ai { background: linear-gradient(135deg, #FEF3C7, #FDE68A); }

  .layer-title {
    font-size: 18px;
    font-weight: 700;
  }

  .layer-subtitle {
    font-size: 13px;
    color: var(--text-muted);
    margin-top: 2px;
  }

  .layer-plain {
    background: var(--bg-warm);
    border-radius: var(--radius-sm);
    padding: 14px 18px;
    font-size: 14px;
    color: var(--text-secondary);
    line-height: 1.7;
    margin-bottom: 20px;
  }

  .layer-plain .emoji {
    margin-right: 6px;
  }

  .layer-components {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 12px;
  }

  .component-card {
    background: var(--bg-primary);
    border-radius: var(--radius-sm);
    padding: 14px 16px;
    border: 1px solid var(--border-light);
    transition: all 0.2s ease;
  }

  .component-card:hover {
    border-color: var(--accent-lavender);
    box-shadow: var(--shadow-glow-lavender);
  }

  .component-card h5 {
    font-size: 13px;
    font-weight: 700;
    margin-bottom: 4px;
    font-family: 'JetBrains Mono', monospace;
  }

  .component-card p {
    font-size: 12px;
    color: var(--text-muted);
    line-height: 1.5;
  }

  /* â”€â”€â”€ Chat Theater â”€â”€â”€ */
  .chat-container {
    background: var(--bg-card);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-soft);
    overflow: hidden;
  }

  .chat-header {
    background: linear-gradient(135deg, #1A1A2E, #2D2B55);
    padding: 24px 32px;
    color: #fff;
  }

  .chat-header h3 {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 4px;
  }

  .chat-header p {
    font-size: 13px;
    color: rgba(255,255,255,0.6);
  }

  .chat-controls {
    display: flex;
    gap: 8px;
    padding: 16px 32px;
    border-bottom: 1px solid var(--border-light);
    background: var(--bg-primary);
  }

  .chat-controls button {
    padding: 8px 18px;
    border: 1px solid var(--border-light);
    background: var(--bg-card);
    font-family: 'Noto Sans SC', sans-serif;
    font-size: 13px;
    font-weight: 500;
    color: var(--text-secondary);
    cursor: pointer;
    border-radius: 8px;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .chat-controls button:hover {
    border-color: var(--accent-lavender);
    color: var(--accent-lavender);
  }

  .chat-controls button.primary {
    background: var(--text-primary);
    color: #fff;
    border-color: var(--text-primary);
  }

  .chat-controls button.primary:hover {
    background: #2D2B55;
  }

  .chat-characters {
    display: flex;
    gap: 12px;
    padding: 16px 32px;
    border-bottom: 1px solid var(--border-light);
    overflow-x: auto;
  }

  .character-badge {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 14px;
    border-radius: var(--radius-sm);
    border: 1px solid var(--border-light);
    flex-shrink: 0;
    font-size: 13px;
    font-weight: 500;
  }

  .character-avatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 13px;
    font-weight: 700;
    color: #fff;
  }

  .chat-messages {
    padding: 24px 32px;
    max-height: 520px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .chat-message {
    display: flex;
    gap: 12px;
    opacity: 0;
    transform: translateY(12px);
    transition: all 0.35s ease;
  }

  .chat-message.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .msg-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    font-weight: 700;
    color: #fff;
    flex-shrink: 0;
  }

  .msg-body {
    flex: 1;
  }

  .msg-meta {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 6px;
  }

  .msg-name {
    font-size: 13px;
    font-weight: 700;
  }

  .msg-arrow {
    font-size: 12px;
    color: var(--text-muted);
  }

  .msg-bubble {
    background: var(--bg-primary);
    border-radius: 0 var(--radius) var(--radius) var(--radius);
    padding: 14px 18px;
    font-size: 14px;
    color: var(--text-secondary);
    line-height: 1.65;
    border: 1px solid var(--border-light);
  }

  .msg-ref {
    margin-top: 8px;
    font-size: 11px;
    color: var(--text-muted);
    font-family: 'JetBrains Mono', monospace;
  }

  /* â”€â”€â”€ Terms Dictionary â”€â”€â”€ */
  .terms-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 16px;
  }

  .term-card {
    background: var(--bg-card);
    border-radius: var(--radius);
    box-shadow: var(--shadow-soft);
    padding: 24px 28px;
    cursor: pointer;
    transition: all 0.25s ease;
    border: 2px solid transparent;
  }

  .term-card:hover {
    box-shadow: var(--shadow-hover);
    transform: translateY(-2px);
  }

  .term-card.expanded {
    border-color: var(--accent-coral);
  }

  .term-card h4 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 6px;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .term-card h4 .term-tag {
    font-size: 11px;
    font-weight: 600;
    padding: 2px 8px;
    border-radius: 6px;
    background: #EDE9FE;
    color: var(--accent-lavender);
  }

  .term-card .term-plain {
    font-size: 14px;
    color: var(--text-secondary);
    line-height: 1.6;
    margin-bottom: 12px;
  }

  .term-card .term-analogy {
    background: var(--bg-warm);
    border-radius: var(--radius-sm);
    padding: 12px 16px;
    font-size: 13px;
    color: var(--accent-coral);
    font-weight: 500;
    line-height: 1.55;
    display: none;
  }

  .term-card.expanded .term-analogy {
    display: block;
    animation: fadeUp 0.3s ease;
  }

  /* â”€â”€â”€ Scenario Selector â”€â”€â”€ */
  .scenario-selector {
    display: flex;
    gap: 12px;
    margin-bottom: 24px;
    flex-wrap: wrap;
  }

  .scenario-btn {
    padding: 10px 20px;
    border: 2px solid var(--border-light);
    background: var(--bg-card);
    font-family: 'Noto Sans SC', sans-serif;
    font-size: 13px;
    font-weight: 600;
    color: var(--text-secondary);
    cursor: pointer;
    border-radius: var(--radius-sm);
    transition: all 0.2s ease;
  }

  .scenario-btn:hover {
    border-color: var(--accent-lavender);
  }

  .scenario-btn.active {
    background: var(--text-primary);
    color: #fff;
    border-color: var(--text-primary);
  }

  .scenario-btn .core-badge {
    display: inline-block;
    background: var(--accent-gold);
    color: var(--text-primary);
    font-size: 10px;
    font-weight: 700;
    padding: 1px 6px;
    border-radius: 4px;
    margin-left: 6px;
  }

  /* â”€â”€â”€ Responsive â”€â”€â”€ */
  @media (max-width: 768px) {
    .page-header, .tab-nav, .content { padding-left: 20px; padding-right: 20px; }
    .page-header h1 { font-size: 24px; }
    .graph-canvas { height: 480px; }
    .chat-header, .chat-controls, .chat-characters, .chat-messages { padding-left: 20px; padding-right: 20px; }
    .terms-grid { grid-template-columns: 1fr; }
    .layer-components { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<!-- Header -->
<div class="page-header">
  <h1>æƒ…æ„Ÿåˆ†æç³»ç»Ÿ Â· <span>æ¶æ„å…¨æ™¯å›¾</span></h1>
  <p>ç”¨æœ€ç›´ç™½çš„æ–¹å¼ï¼Œå¸¦ä½ çœ‹æ‡‚è¿™ä¸ªé¡¹ç›®é‡Œæ¯ä¸ªæ–‡ä»¶åœ¨å¹²ä»€ä¹ˆã€å®ƒä»¬ä¹‹é—´æ€ä¹ˆé…åˆå·¥ä½œã€‚</p>
</div>

<!-- Tab Navigation -->
<div class="tab-nav">
  <button class="tab-btn active" data-tab="graph" onclick="switchTab('graph')">
    <span class="tab-icon">ğŸ”—</span> å…³ç³»å›¾è°±
  </button>
  <button class="tab-btn" data-tab="layers" onclick="switchTab('layers')">
    <span class="tab-icon">ğŸ—ï¸</span> æ¶æ„åˆ†å±‚
  </button>
  <button class="tab-btn" data-tab="chat" onclick="switchTab('chat')">
    <span class="tab-icon">ğŸ’¬</span> æœåŠ¡èŠå¤©
  </button>
  <button class="tab-btn" data-tab="terms" onclick="switchTab('terms')">
    <span class="tab-icon">ğŸ“–</span> åè¯è§£é‡Š
  </button>
</div>

<!-- Content -->
<div class="content">

  <!-- â•â•â• Tab 1: Relationship Graph â•â•â• -->
  <div class="tab-panel active" id="panel-graph">
    <div class="graph-container">
      <svg class="graph-canvas" id="graphSvg"></svg>
      <div class="node-tooltip" id="nodeTooltip"></div>
    </div>
  </div>

  <!-- â•â•â• Tab 2: Layered Architecture â•â•â• -->
  <div class="tab-panel" id="panel-layers">
    <div class="layers-section" id="layersContainer"></div>
  </div>

  <!-- â•â•â• Tab 3: Service Chat â•â•â• -->
  <div class="tab-panel" id="panel-chat">
    <div class="scenario-selector" id="scenarioSelector"></div>
    <div class="chat-container">
      <div class="chat-header">
        <h3 id="chatTitle">æœåŠ¡ç¾¤èŠå°å‰§åœº</h3>
        <p id="chatDesc">çœ‹çœ‹å„ä¸ªæ¨¡å—ä¹‹é—´æ€ä¹ˆä¼ è¯é…åˆ</p>
      </div>
      <div class="chat-controls">
        <button class="primary" onclick="playChat()">â–¶ æ’­æ”¾</button>
        <button onclick="pauseChat()">â¸ æš‚åœ</button>
        <button onclick="resetChat()">â†º é‡æ’­</button>
        <button onclick="showAllChat()">â© å…¨éƒ¨æ˜¾ç¤º</button>
      </div>
      <div class="chat-characters" id="chatCharacters"></div>
      <div class="chat-messages" id="chatMessages"></div>
    </div>
  </div>

  <!-- â•â•â• Tab 4: Terms Dictionary â•â•â• -->
  <div class="tab-panel" id="panel-terms">
    <div class="terms-grid" id="termsGrid"></div>
  </div>

</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DATA â€” åŸºäºæˆªå›¾ä¸­çš„æƒ…æ„Ÿåˆ†æé¡¹ç›®æ–‡ä»¶ç»“æ„
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

const PROJECT_DATA = {
  nodes: [
    {
      id: 'user',
      label: 'ğŸ‘¤ ç”¨æˆ·',
      type: 'external',
      color: '#38BDF8',
      description: 'æ‰“å¼€æµè§ˆå™¨è®¿é—®ç½‘é¡µçš„äºº',
      analogy: 'å°±åƒå»é¤å…åƒé¥­çš„å®¢äººï¼Œåªéœ€è¦çœ‹èœå•ã€ç‚¹èœå°±è¡Œã€‚',
      x: 450, y: 60, radius: 32
    },
    {
      id: 'index_html',
      label: 'index.html',
      type: 'frontend',
      color: '#4ECDC4',
      description: 'å‰ç«¯ç½‘é¡µç•Œé¢ï¼Œç”¨æˆ·ç›´æ¥çœ‹åˆ°å’Œæ“ä½œçš„é¡µé¢ã€‚åŒ…å«è¾“å…¥æ¡†ã€æŒ‰é’®å’Œç»“æœå±•ç¤ºåŒºåŸŸã€‚',
      analogy: 'å°±åƒé¤å…çš„å¤§å ‚å’Œèœå•ï¼Œå®¢äººåœ¨è¿™é‡Œç‚¹èœï¼ˆè¾“å…¥æ–‡æœ¬ï¼‰ã€çœ‹ç»“æœï¼ˆæƒ…æ„Ÿåˆ†æç»“æœï¼‰ã€‚',
      x: 450, y: 170, radius: 36
    },
    {
      id: 'main_py',
      label: 'main.py',
      type: 'backend',
      color: '#A78BFA',
      description: 'åç«¯çš„"æ€»æŒ‡æŒ¥"ï¼Œå¯åŠ¨æ•´ä¸ªæœåŠ¡å™¨ï¼Œæ¥æ”¶å‰ç«¯å‘æ¥çš„è¯·æ±‚ï¼Œç„¶ååˆ†é…ç»™å¯¹åº”çš„æ¨¡å—å»å¤„ç†ã€‚',
      analogy: 'å°±åƒé¤å…çš„å‰å°ç»ç†ï¼Œå®¢äººçš„éœ€æ±‚éƒ½å…ˆåˆ°ä»–è¿™é‡Œï¼Œä»–å†å®‰æ’å¨å¸ˆã€æœåŠ¡å‘˜å»å¹²æ´»ã€‚',
      x: 450, y: 310, radius: 40
    },
    {
      id: 'scraper_py',
      label: 'scraper.py',
      type: 'backend',
      color: '#FB7185',
      description: 'ç½‘ç»œçˆ¬è™«æ¨¡å—ï¼Œè´Ÿè´£ä»ç½‘ä¸ŠæŠ“å–è¯„è®ºã€æ–‡ç« ç­‰æ–‡æœ¬æ•°æ®ï¼Œä¾›æƒ…æ„Ÿåˆ†æä½¿ç”¨ã€‚',
      analogy: 'å°±åƒé¤å…çš„é‡‡è´­å‘˜ï¼Œä¸“é—¨è·‘åˆ°å¸‚åœºä¸Šå»æ”¶é›†é£Ÿæï¼ˆæ–‡æœ¬æ•°æ®ï¼‰ï¼Œå¸¦å›æ¥ç»™å¨å¸ˆåŠ å·¥ã€‚',
      x: 220, y: 420, radius: 34
    },
    {
      id: 'sentiment_analyzer_py',
      label: 'sentiment_analyzer.py',
      type: 'ai',
      color: '#FBBF24',
      description: 'æƒ…æ„Ÿåˆ†æçš„æ ¸å¿ƒå¼•æ“ï¼Œç”¨ AI æ¨¡å‹åˆ¤æ–­ä¸€æ®µæ–‡å­—æ˜¯"æ­£é¢"ã€"è´Ÿé¢"è¿˜æ˜¯"ä¸­æ€§"æƒ…ç»ªã€‚',
      analogy: 'å°±åƒä¸€ä¸ªè¯»å¿ƒæœ¯å¤§å¸ˆï¼Œä½ ç»™ä»–ä¸€æ®µè¯ï¼Œä»–å°±èƒ½å‘Šè¯‰ä½ è¯´è¯çš„äººå¿ƒæƒ…å¥½ä¸å¥½ã€‚',
      x: 450, y: 440, radius: 38
    },
    {
      id: 'models_py',
      label: 'models.py',
      type: 'backend',
      color: '#A78BFA',
      description: 'å®šä¹‰æ•°æ®çš„"æ¨¡æ¿"ï¼Œè§„å®šäº†æƒ…æ„Ÿåˆ†æç»“æœåº”è¯¥é•¿ä»€ä¹ˆæ ·â€”â€”åŒ…å«å“ªäº›å­—æ®µã€ä»€ä¹ˆæ ¼å¼ã€‚',
      analogy: 'å°±åƒè¡¨æ ¼çš„æ¨¡æ¿ï¼Œè§„å®šäº†"å§“åå¡«è¿™é‡Œã€ç”µè¯å¡«é‚£é‡Œ"ï¼Œè®©æ•°æ®æ•´æ•´é½é½ã€‚',
      x: 680, y: 420, radius: 32
    },
    {
      id: 'database_py',
      label: 'database.py',
      type: 'data',
      color: '#FF6B6B',
      description: 'æ•°æ®åº“æ“ä½œæ¨¡å—ï¼Œè´Ÿè´£æŠŠåˆ†æç»“æœå­˜èµ·æ¥ã€æŸ¥å‡ºæ¥ã€‚æ‰€æœ‰çš„"è®°å¿†"éƒ½é å®ƒã€‚',
      analogy: 'å°±åƒæ¡£æ¡ˆç®¡ç†å‘˜ï¼Œåˆ†æå®Œçš„ç»“æœéƒ½äº¤ç»™ä»–å½’æ¡£ä¿å­˜ï¼Œä¸‹æ¬¡è¦æŸ¥çš„æ—¶å€™ä»–å¸®ä½ ç¿»å‡ºæ¥ã€‚',
      x: 340, y: 560, radius: 34
    },
    {
      id: 'sentiment_db',
      label: 'sentiment.db',
      type: 'data',
      color: '#FF6B6B',
      description: 'å®é™…çš„æ•°æ®åº“æ–‡ä»¶ï¼ˆSQLiteï¼‰ï¼Œæ‰€æœ‰æƒ…æ„Ÿåˆ†æçš„ç»“æœéƒ½å­˜åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œã€‚',
      analogy: 'å°±åƒä¸€ä¸ªå¤§æ¡£æ¡ˆæŸœï¼Œæ‰€æœ‰åˆ†æè¿‡çš„è®°å½•éƒ½é”åœ¨é‡Œé¢ï¼Œéšæ—¶å¯ä»¥ç¿»é˜…ã€‚',
      x: 560, y: 560, radius: 30
    },
    {
      id: 'requirements_txt',
      label: 'requirements.txt',
      type: 'config',
      color: '#34D399',
      description: 'ä¾èµ–æ¸…å•ï¼Œåˆ—å‡ºäº†è¿™ä¸ªé¡¹ç›®éœ€è¦å®‰è£…çš„æ‰€æœ‰ç¬¬ä¸‰æ–¹å·¥å…·åŒ…ã€‚',
      analogy: 'å°±åƒè£…ä¿®æˆ¿å­å‰çš„ææ–™æ¸…å•â€”â€”æ°´æ³¥è¦å¤šå°‘ã€æ²¹æ¼†è¦å‡ æ¡¶ï¼Œå…¨å†™åœ¨ä¸Šé¢ã€‚',
      x: 130, y: 310, radius: 28
    }
  ],

  edges: [
    { from: 'user', to: 'index_html', label: 'æ‰“å¼€ç½‘é¡µ / è¾“å…¥æ–‡æœ¬', type: 'request' },
    { from: 'index_html', to: 'main_py', label: 'å‘é€ HTTP è¯·æ±‚', type: 'request' },
    { from: 'main_py', to: 'index_html', label: 'è¿”å›åˆ†æç»“æœ', type: 'response' },
    { from: 'main_py', to: 'sentiment_analyzer_py', label: 'è°ƒç”¨æƒ…æ„Ÿåˆ†æ', type: 'call' },
    { from: 'main_py', to: 'scraper_py', label: 'è°ƒç”¨çˆ¬è™«æŠ“æ•°æ®', type: 'call' },
    { from: 'main_py', to: 'database_py', label: 'å­˜å–åˆ†æç»“æœ', type: 'call' },
    { from: 'main_py', to: 'models_py', label: 'ä½¿ç”¨æ•°æ®æ¨¡æ¿', type: 'import' },
    { from: 'sentiment_analyzer_py', to: 'models_py', label: 'ä½¿ç”¨æ•°æ®æ¨¡æ¿', type: 'import' },
    { from: 'database_py', to: 'sentiment_db', label: 'è¯»å†™æ•°æ®', type: 'data' },
    { from: 'database_py', to: 'models_py', label: 'ä½¿ç”¨æ•°æ®æ¨¡æ¿', type: 'import' },
    { from: 'scraper_py', to: 'sentiment_analyzer_py', label: 'ä¼ é€’æŠ“å–çš„æ–‡æœ¬', type: 'data' },
  ],

  layers: [
    {
      id: 'layer-user',
      name: 'ç”¨æˆ·å±‚',
      icon: 'ğŸ‘¤',
      iconClass: 'icon-user',
      layerClass: 'layer-user',
      plain: 'ğŸ§‘ å°±æ˜¯ä½ â€”â€”æ‰“å¼€æµè§ˆå™¨ã€è¾“å…¥ç½‘å€ã€ç‚¹æŒ‰é’®çš„é‚£ä¸ªäººã€‚ä½ ä¸éœ€è¦æ‡‚ä»»ä½•ä»£ç ï¼Œåªç®¡ç”¨å°±è¡Œã€‚',
      components: []
    },
    {
      id: 'layer-frontend',
      name: 'å‰ç«¯å±•ç¤ºå±‚',
      icon: 'ğŸ–¥ï¸',
      iconClass: 'icon-frontend',
      layerClass: 'layer-frontend',
      plain: 'ğŸ¨ è¿™ä¸€å±‚å°±åƒé¤å…çš„å¤§å ‚â€”â€”è£…ä¿®å¥½çœ‹ã€èœå•æ¸…æ™°ã€æœåŠ¡å‘˜å¾®ç¬‘è¿æ¥ã€‚ç”¨æˆ·ç›´æ¥çœ‹åˆ°çš„ç•Œé¢å°±åœ¨è¿™é‡Œã€‚å®ƒè´Ÿè´£æŠŠä½ è¾“å…¥çš„æ–‡å­—å‘ç»™åç«¯ï¼Œå†æŠŠåç«¯è¿”å›çš„ç»“æœæ¼‚æ¼‚äº®äº®åœ°å±•ç¤ºå‡ºæ¥ã€‚',
      components: [
        { name: 'index.html', desc: 'ç½‘é¡µç•Œé¢ï¼ŒåŒ…å«è¾“å…¥æ¡†ã€åˆ†ææŒ‰é’®å’Œç»“æœå±•ç¤ºåŒº' },
        { name: 'CSS æ ·å¼', desc: 'é¡µé¢çš„"è¡£æœ"ï¼Œå†³å®šäº†é¢œè‰²ã€å­—ä½“ã€æ’ç‰ˆ' },
        { name: 'JavaScript', desc: 'é¡µé¢çš„"å¤§è„‘"ï¼Œå¤„ç†æŒ‰é’®ç‚¹å‡»ã€å‘é€è¯·æ±‚' }
      ]
    },
    {
      id: 'layer-backend',
      name: 'åç«¯æœåŠ¡å±‚',
      icon: 'âš™ï¸',
      iconClass: 'icon-backend',
      layerClass: 'layer-backend',
      plain: 'ğŸ­ è¿™ä¸€å±‚å°±åƒé¤å…çš„å¨æˆ¿â€”â€”å®¢äººçœ‹ä¸åˆ°ï¼Œä½†æ‰€æœ‰çš„æ ¸å¿ƒå·¥ä½œéƒ½åœ¨è¿™é‡Œå®Œæˆã€‚æ¥æ”¶å‰ç«¯çš„è¯·æ±‚ã€è°ƒç”¨ AI åˆ†æã€ç®¡ç†æ•°æ®ï¼Œå…¨é å®ƒã€‚',
      components: [
        { name: 'main.py', desc: 'æ€»æŒ‡æŒ¥ï¼Œå¯åŠ¨æœåŠ¡å™¨ã€æ¥æ”¶è¯·æ±‚ã€åˆ†é…ä»»åŠ¡' },
        { name: 'scraper.py', desc: 'é‡‡è´­å‘˜ï¼Œä»ç½‘ä¸ŠæŠ“å–æ–‡æœ¬æ•°æ®' },
        { name: 'models.py', desc: 'è¡¨æ ¼æ¨¡æ¿ï¼Œå®šä¹‰æ•°æ®é•¿ä»€ä¹ˆæ ·' },
        { name: 'requirements.txt', desc: 'ææ–™æ¸…å•ï¼Œåˆ—å‡ºéœ€è¦çš„å·¥å…·åŒ…' }
      ]
    },
    {
      id: 'layer-ai',
      name: 'AI æ™ºèƒ½å±‚',
      icon: 'ğŸ§ ',
      iconClass: 'icon-ai',
      layerClass: 'layer-ai',
      plain: 'ğŸ¤– è¿™ä¸€å±‚æ˜¯é¡¹ç›®çš„"çµé­‚"â€”â€”ç”¨äººå·¥æ™ºèƒ½æ¨¡å‹æ¥åˆ¤æ–­ä¸€æ®µæ–‡å­—çš„æƒ…ç»ªã€‚ä½ ç»™å®ƒä¸€å¥è¯ï¼Œå®ƒå°±èƒ½å‘Šè¯‰ä½ è¿™å¥è¯æ˜¯å¼€å¿ƒã€éš¾è¿‡è¿˜æ˜¯æ²¡å•¥æ„Ÿè§‰ã€‚å°±åƒä¸€ä¸ªè¯»å¿ƒæœ¯å¤§å¸ˆã€‚',
      components: [
        { name: 'sentiment_analyzer.py', desc: 'æƒ…æ„Ÿåˆ†æå¼•æ“ï¼ŒAI åˆ¤æ–­æ–‡å­—æƒ…ç»ªçš„æ ¸å¿ƒ' }
      ]
    },
    {
      id: 'layer-data',
      name: 'æ•°æ®å­˜å‚¨å±‚',
      icon: 'ğŸ’¾',
      iconClass: 'icon-data',
      layerClass: 'layer-data',
      plain: 'ğŸ—„ï¸ è¿™ä¸€å±‚å°±åƒæ¡£æ¡ˆå®¤â€”â€”æ‰€æœ‰åˆ†æè¿‡çš„ç»“æœéƒ½å­˜åœ¨è¿™é‡Œã€‚ä¸‹æ¬¡ä½ æƒ³æŸ¥ä¹‹å‰çš„åˆ†æè®°å½•ï¼Œå°±ä»è¿™é‡Œç¿»å‡ºæ¥ã€‚ç”¨çš„æ˜¯ SQLite æ•°æ®åº“ï¼Œä¸€ä¸ªè½»é‡çº§çš„"æ¡£æ¡ˆæŸœ"ã€‚',
      components: [
        { name: 'database.py', desc: 'æ¡£æ¡ˆç®¡ç†å‘˜ï¼Œè´Ÿè´£å­˜å–åˆ†æç»“æœ' },
        { name: 'sentiment.db', desc: 'æ¡£æ¡ˆæŸœæœ¬ä½“ï¼Œå®é™…å­˜æ•°æ®çš„æ–‡ä»¶' }
      ]
    }
  ],

  scenarios: [
    {
      id: 'analyze',
      title: 'ç”¨æˆ·åˆ†æä¸€æ®µæ–‡å­—',
      description: 'ç”¨æˆ·è¾“å…¥ä¸€æ®µè¯ï¼Œç³»ç»Ÿåˆ¤æ–­æƒ…ç»ªæ˜¯æ­£é¢è¿˜æ˜¯è´Ÿé¢',
      isCore: true,
      characters: [
        { id: 'user', name: 'ç”¨æˆ·å°æ˜', color: '#38BDF8' },
        { id: 'fe', name: 'ç½‘é¡µå°ç¾', color: '#4ECDC4' },
        { id: 'main', name: 'æ€»æŒ‡æŒ¥è€ç‹', color: '#A78BFA' },
        { id: 'ai', name: 'AI è¯»å¿ƒå¸ˆ', color: '#FBBF24' },
        { id: 'db', name: 'æ¡£æ¡ˆç®¡ç†å‘˜', color: '#FF6B6B' }
      ],
      messages: [
        { from: 'user', to: 'fe', content: 'æˆ‘åœ¨è¾“å…¥æ¡†é‡Œå†™äº†ä¸€å¥è¯ï¼š"ä»Šå¤©å¤©æ°”çœŸå¥½ï¼Œå¿ƒæƒ…è¶…æ£’ï¼"ç„¶åç‚¹äº†åˆ†ææŒ‰é’®ã€‚', ref: 'index.html' },
        { from: 'fe', to: 'main', content: 'è€ç‹ï¼ç”¨æˆ·åˆšæäº¤äº†ä¸€æ®µæ–‡å­—ï¼Œè¦åšæƒ…æ„Ÿåˆ†æã€‚æˆ‘æŠŠæ–‡å­—å‘ç»™ä½ äº†ï¼Œå¸®å¿™å¤„ç†ä¸€ä¸‹ï¼Ÿ', ref: 'index.html â†’ main.py' },
        { from: 'main', to: 'ai', content: 'æ”¶åˆ°ï¼AI è¯»å¿ƒå¸ˆï¼Œå¸®æˆ‘çœ‹çœ‹è¿™æ®µè¯æ˜¯ä»€ä¹ˆæƒ…ç»ªï¼š"ä»Šå¤©å¤©æ°”çœŸå¥½ï¼Œå¿ƒæƒ…è¶…æ£’ï¼"', ref: 'main.py â†’ sentiment_analyzer.py' },
        { from: 'ai', to: 'main', content: 'åˆ†æå®Œäº†ï¼è¿™æ®µè¯æƒ…ç»ªæ˜¯ã€Œæ­£é¢ã€ï¼Œç½®ä¿¡åº¦ 95%ã€‚è¯´è¯çš„äººå¿ƒæƒ…å¾ˆå¥½å‘¢ï½', ref: 'sentiment_analyzer.py â†’ main.py' },
        { from: 'main', to: 'db', content: 'æ¡£æ¡ˆç®¡ç†å‘˜ï¼Œå¸®æˆ‘æŠŠè¿™æ¡åˆ†æç»“æœå­˜èµ·æ¥â€”â€”æ–‡æœ¬ã€æƒ…ç»ªã€ç½®ä¿¡åº¦ï¼Œéƒ½è®°å¥½ã€‚', ref: 'main.py â†’ database.py' },
        { from: 'db', to: 'main', content: 'å­˜å¥½äº†ï¼ç¼–å· #1024ï¼Œéšæ—¶å¯ä»¥æŸ¥ã€‚', ref: 'database.py â†’ sentiment.db' },
        { from: 'main', to: 'fe', content: 'ç»“æœå‡ºæ¥äº†ï¼æƒ…ç»ªï¼šæ­£é¢ï¼Œç½®ä¿¡åº¦ï¼š95%ã€‚ä½ å±•ç¤ºç»™ç”¨æˆ·çœ‹å§ã€‚', ref: 'main.py â†’ index.html' },
        { from: 'fe', to: 'user', content: 'åˆ†æå®Œæˆï¼ğŸ‰ ä½ çš„è¿™æ®µè¯æƒ…ç»ªæ˜¯ã€Œæ­£é¢ã€çš„ï¼Œç½®ä¿¡åº¦ 95%ã€‚çœ‹æ¥ä½ ä»Šå¤©å¿ƒæƒ…ä¸é”™å“¦ï¼', ref: 'index.html' }
      ]
    },
    {
      id: 'scrape',
      title: 'æ‰¹é‡æŠ“å–å¹¶åˆ†æ',
      description: 'ä»ç½‘ä¸ŠæŠ“å–è¯„è®ºï¼Œæ‰¹é‡è¿›è¡Œæƒ…æ„Ÿåˆ†æ',
      isCore: false,
      characters: [
        { id: 'main', name: 'æ€»æŒ‡æŒ¥è€ç‹', color: '#A78BFA' },
        { id: 'scraper', name: 'é‡‡è´­å‘˜å°æ', color: '#FB7185' },
        { id: 'ai', name: 'AI è¯»å¿ƒå¸ˆ', color: '#FBBF24' },
        { id: 'db', name: 'æ¡£æ¡ˆç®¡ç†å‘˜', color: '#FF6B6B' }
      ],
      messages: [
        { from: 'main', to: 'scraper', content: 'å°æï¼Œå¸®æˆ‘å»ç½‘ä¸ŠæŠ“ä¸€æ‰¹å•†å“è¯„è®ºå›æ¥ï¼Œæˆ‘è¦åšæƒ…æ„Ÿåˆ†æã€‚', ref: 'main.py â†’ scraper.py' },
        { from: 'scraper', to: 'main', content: 'æ”¶åˆ°ï¼æˆ‘å»è·‘äº†ä¸€åœˆï¼ŒæŠ“äº† 50 æ¡è¯„è®ºå›æ¥ã€‚æœ‰å¥½è¯„æœ‰å·®è¯„ï¼ŒæŒºä¸°å¯Œçš„ã€‚', ref: 'scraper.py â†’ main.py' },
        { from: 'main', to: 'ai', content: 'AI è¯»å¿ƒå¸ˆï¼Œè¿™ 50 æ¡è¯„è®ºä½ å¸®æˆ‘ä¸€æ¡ä¸€æ¡åˆ†æä¸€ä¸‹ï¼Œçœ‹çœ‹å“ªäº›æ˜¯æ­£é¢çš„ã€å“ªäº›æ˜¯è´Ÿé¢çš„ã€‚', ref: 'main.py â†’ sentiment_analyzer.py' },
        { from: 'ai', to: 'main', content: 'å…¨éƒ¨åˆ†æå®Œäº†ï¼æ­£é¢ 32 æ¡ã€è´Ÿé¢ 12 æ¡ã€ä¸­æ€§ 6 æ¡ã€‚æ•´ä½“å£ç¢‘è¿˜ä¸é”™ã€‚', ref: 'sentiment_analyzer.py â†’ main.py' },
        { from: 'main', to: 'db', content: 'æ¡£æ¡ˆç®¡ç†å‘˜ï¼Œè¿™ 50 æ¡åˆ†æç»“æœéƒ½å¸®æˆ‘å­˜å¥½ï¼Œä»¥åè¦å‡ºæŠ¥å‘Šç”¨ã€‚', ref: 'main.py â†’ database.py' },
        { from: 'db', to: 'main', content: 'å…¨éƒ¨å½’æ¡£å®Œæ¯•ï¼éšæ—¶å¯ä»¥æŸ¥è¯¢å’Œå¯¼å‡ºã€‚', ref: 'database.py â†’ sentiment.db' }
      ]
    },
    {
      id: 'history',
      title: 'æŸ¥çœ‹å†å²è®°å½•',
      description: 'ç”¨æˆ·æŸ¥çœ‹ä¹‹å‰åˆ†æè¿‡çš„æ‰€æœ‰ç»“æœ',
      isCore: false,
      characters: [
        { id: 'user', name: 'ç”¨æˆ·å°æ˜', color: '#38BDF8' },
        { id: 'fe', name: 'ç½‘é¡µå°ç¾', color: '#4ECDC4' },
        { id: 'main', name: 'æ€»æŒ‡æŒ¥è€ç‹', color: '#A78BFA' },
        { id: 'db', name: 'æ¡£æ¡ˆç®¡ç†å‘˜', color: '#FF6B6B' }
      ],
      messages: [
        { from: 'user', to: 'fe', content: 'æˆ‘æƒ³çœ‹çœ‹ä¹‹å‰åˆ†æè¿‡çš„æ‰€æœ‰è®°å½•ã€‚', ref: 'index.html' },
        { from: 'fe', to: 'main', content: 'è€ç‹ï¼Œç”¨æˆ·è¦æŸ¥å†å²è®°å½•ï¼Œå¸®å¿™è°ƒä¸€ä¸‹ã€‚', ref: 'index.html â†’ main.py' },
        { from: 'main', to: 'db', content: 'æ¡£æ¡ˆç®¡ç†å‘˜ï¼ŒæŠŠæ‰€æœ‰åˆ†æè®°å½•éƒ½ç¿»å‡ºæ¥ï¼ŒæŒ‰æ—¶é—´æ’å¥½åºã€‚', ref: 'main.py â†’ database.py' },
        { from: 'db', to: 'main', content: 'æ‰¾åˆ°äº†ï¼ä¸€å…± 73 æ¡è®°å½•ï¼Œæœ€æ—©çš„æ˜¯ä¸Šå‘¨ä¸€çš„ï¼Œæœ€æ–°çš„æ˜¯åˆšæ‰é‚£æ¡ã€‚', ref: 'database.py â†’ sentiment.db' },
        { from: 'main', to: 'fe', content: 'æ•°æ®ç»™ä½ äº†ï¼Œ73 æ¡è®°å½•ï¼Œä½ æ’ç‰ˆå±•ç¤ºç»™ç”¨æˆ·çœ‹å§ã€‚', ref: 'main.py â†’ index.html' },
        { from: 'fe', to: 'user', content: 'è¿™æ˜¯ä½ çš„å…¨éƒ¨åˆ†æå†å²ï¼Œä¸€å…± 73 æ¡ã€‚å¯ä»¥æŒ‰æ—¶é—´ã€æƒ…ç»ªç±»å‹ç­›é€‰å“¦ï¼', ref: 'index.html' }
      ]
    }
  ],

  terms: [
    {
      term: 'FastAPI',
      plain: 'ä¸€ä¸ªç”¨ Python å†™çš„"æœåŠ¡å™¨æ¡†æ¶"ï¼Œå¸®ä½ å¿«é€Ÿæ­å»ºåç«¯æ¥å£ã€‚',
      analogy: 'å°±åƒä¸€ä¸ªä¸‡èƒ½å·¥å…·ç®±ï¼Œé‡Œé¢æœ‰æ­å»ºåç«¯æœåŠ¡éœ€è¦çš„æ‰€æœ‰å·¥å…·ï¼Œæ‹§èºä¸ã€é’‰é’‰å­éƒ½ä¸ç”¨è‡ªå·±é€ å·¥å…·ã€‚',
      related: 'åç«¯æœåŠ¡å±‚'
    },
    {
      term: 'SQLite',
      plain: 'ä¸€ä¸ªè½»é‡çº§æ•°æ®åº“ï¼Œæ•°æ®å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œä¸éœ€è¦å•ç‹¬å®‰è£…æ•°æ®åº“è½¯ä»¶ã€‚',
      analogy: 'å°±åƒä¸€ä¸ªéšèº«æºå¸¦çš„å°ç¬”è®°æœ¬ï¼Œä¸éœ€è¦å»å›¾ä¹¦é¦†ï¼ˆå¤§å‹æ•°æ®åº“ï¼‰ï¼Œåœ¨è‡ªå·±å£è¢‹é‡Œå°±èƒ½è®°ä¸œè¥¿ã€‚',
      related: 'æ•°æ®å­˜å‚¨å±‚'
    },
    {
      term: 'HTTP è¯·æ±‚',
      plain: 'æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’ä¿¡æ¯çš„æ–¹å¼ï¼Œå°±åƒå¯„å¿«é€’ä¸€æ ·æœ‰å›ºå®šçš„æ ¼å¼ã€‚',
      analogy: 'å°±åƒå¯„å¿«é€’â€”â€”ä½ å¡«å¥½æ”¶ä»¶åœ°å€ï¼ˆURLï¼‰ã€æ”¾å¥½åŒ…è£¹ï¼ˆæ•°æ®ï¼‰ï¼Œå¿«é€’å…¬å¸ï¼ˆæµè§ˆå™¨ï¼‰å°±å¸®ä½ é€åˆ°ç›®çš„åœ°ï¼ˆæœåŠ¡å™¨ï¼‰ã€‚',
      related: 'å‰ç«¯ â†’ åç«¯'
    },
    {
      term: 'æƒ…æ„Ÿåˆ†æ',
      plain: 'ç”¨ AI åˆ¤æ–­ä¸€æ®µæ–‡å­—è¡¨è¾¾çš„æ˜¯æ­£é¢ã€è´Ÿé¢è¿˜æ˜¯ä¸­æ€§æƒ…ç»ªã€‚',
      analogy: 'å°±åƒä¸€ä¸ªè¶…çº§æ•æ„Ÿçš„æœ‹å‹ï¼Œä½ å‘ä¸€æ¡æ¶ˆæ¯ï¼Œä»–å°±èƒ½æ„Ÿè§‰åˆ°ä½ æ˜¯å¼€å¿ƒã€éš¾è¿‡è¿˜æ˜¯æ— æ‰€è°“ã€‚',
      related: 'AI æ™ºèƒ½å±‚'
    },
    {
      term: 'API æ¥å£',
      plain: 'ä¸åŒè½¯ä»¶ä¹‹é—´æ²Ÿé€šçš„"ä¼ å£°ç­’"ï¼Œå®šä¹‰äº†"ä½ å¯ä»¥é—®æˆ‘ä»€ä¹ˆã€æˆ‘ä¼šæ€ä¹ˆå›ç­”"ã€‚',
      analogy: 'å°±åƒé¤å…çš„æœåŠ¡çª—å£â€”â€”ä½ åœ¨çª—å£ç‚¹èœï¼ˆå‘è¯·æ±‚ï¼‰ï¼Œå¨æˆ¿åšå¥½äº†ä»çª—å£é€’å‡ºæ¥ï¼ˆè¿”å›ç»“æœï¼‰ã€‚',
      related: 'åç«¯æœåŠ¡å±‚'
    },
    {
      term: 'çˆ¬è™« (Scraper)',
      plain: 'è‡ªåŠ¨ä»ç½‘é¡µä¸ŠæŠ“å–ä¿¡æ¯çš„ç¨‹åºï¼Œåƒä¸€ä¸ªä¸çŸ¥ç–²å€¦çš„"å¤åˆ¶ç²˜è´´"æœºå™¨äººã€‚',
      analogy: 'å°±åƒæ´¾äº†ä¸€ä¸ªå®ä¹ ç”Ÿå»ç½‘ä¸Šä¸€æ¡ä¸€æ¡åœ°å¤åˆ¶è¯„è®ºï¼Œåªä¸è¿‡è¿™ä¸ªå®ä¹ ç”Ÿé€Ÿåº¦è¶…å¿«ã€æ°¸è¿œä¸ç´¯ã€‚',
      related: 'åç«¯æœåŠ¡å±‚'
    },
    {
      term: 'ORM / æ•°æ®æ¨¡å‹',
      plain: 'ç”¨ä»£ç æ¥æè¿°æ•°æ®åº“é‡Œçš„è¡¨æ ¼é•¿ä»€ä¹ˆæ ·ï¼Œä¸ç”¨ç›´æ¥å†™æ•°æ®åº“è¯­è¨€ã€‚',
      analogy: 'å°±åƒç”¨ Excel æ¨¡æ¿â€”â€”ä½ å…ˆè®¾è®¡å¥½"å§“åã€å¹´é¾„ã€æˆç»©"è¿™äº›åˆ—ï¼Œä»¥åå¡«æ•°æ®å°±æŒ‰æ¨¡æ¿æ¥ã€‚',
      related: 'åç«¯æœåŠ¡å±‚'
    },
    {
      term: 'requirements.txt',
      plain: 'é¡¹ç›®çš„"è´­ç‰©æ¸…å•"ï¼Œåˆ—å‡ºäº†è¿è¡Œè¿™ä¸ªé¡¹ç›®éœ€è¦å®‰è£…çš„æ‰€æœ‰å·¥å…·åŒ…ã€‚',
      analogy: 'å°±åƒåšèœå‰çš„é£Ÿææ¸…å•â€”â€”é¸¡è›‹ 3 ä¸ªã€é¢ç²‰ 500gã€ç³–é€‚é‡ã€‚æ²¡æœ‰è¿™äº›ææ–™ï¼Œèœå°±åšä¸å‡ºæ¥ã€‚',
      related: 'é¡¹ç›®é…ç½®'
    },
    {
      term: 'ç½®ä¿¡åº¦',
      plain: 'AI å¯¹è‡ªå·±åˆ¤æ–­ç»“æœçš„"æŠŠæ¡ç¨‹åº¦"ï¼Œç”¨ç™¾åˆ†æ¯”è¡¨ç¤ºã€‚95% å°±æ˜¯"æˆ‘å¾ˆç¡®å®š"ã€‚',
      analogy: 'å°±åƒè€ƒè¯•åçš„è‡ªæˆ‘æ„Ÿè§‰â€”â€”"è¿™é“é¢˜æˆ‘ 95% ç¡®å®šç­”å¯¹äº†"ï¼Œæ•°å­—è¶Šé«˜è¶Šæœ‰æŠŠæ¡ã€‚',
      related: 'AI æ™ºèƒ½å±‚'
    },
    {
      term: 'å‰åç«¯åˆ†ç¦»',
      plain: 'å‰ç«¯ï¼ˆç”¨æˆ·çœ‹åˆ°çš„ç•Œé¢ï¼‰å’Œåç«¯ï¼ˆå¤„ç†æ•°æ®çš„æœåŠ¡å™¨ï¼‰å„è‡ªç‹¬ç«‹å¼€å‘ï¼Œé€šè¿‡æ¥å£æ²Ÿé€šã€‚',
      analogy: 'å°±åƒé¤å…çš„å‰å…å’Œåå¨åˆ†å¼€â€”â€”æœåŠ¡å‘˜ä¸ç”¨ä¼šåšèœï¼Œå¨å¸ˆä¸ç”¨ä¼šæ‹›å¾…å®¢äººï¼Œå„å¸å…¶èŒã€‚',
      related: 'æ•´ä½“æ¶æ„'
    }
  ]
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TAB SWITCHING
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

function switchTab(tabId) {
  document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
  document.querySelectorAll('.tab-panel').forEach(panel => panel.classList.remove('active'));
  document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');
  document.getElementById(`panel-${tabId}`).classList.add('active');

  if (tabId === 'graph') drawGraph();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GRAPH VISUALIZATION (SVG)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

let hoveredNode = null;
let isDragging = false;
let dragNode = null;
let dragOffset = { x: 0, y: 0 };

function drawGraph() {
  const svg = document.getElementById('graphSvg');
  const rect = svg.getBoundingClientRect();
  const width = rect.width || 900;
  const height = 680;

  svg.setAttribute('viewBox', `0 0 ${width} ${height}`);
  svg.innerHTML = '';

  // Defs for markers and filters
  const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');

  // Arrow marker
  const marker = document.createElementNS('http://www.w3.org/2000/svg', 'marker');
  marker.setAttribute('id', 'arrowhead');
  marker.setAttribute('markerWidth', '8');
  marker.setAttribute('markerHeight', '6');
  marker.setAttribute('refX', '8');
  marker.setAttribute('refY', '3');
  marker.setAttribute('orient', 'auto');
  const arrowPath = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
  arrowPath.setAttribute('points', '0 0, 8 3, 0 6');
  arrowPath.setAttribute('fill', '#C4B5FD');
  marker.appendChild(arrowPath);
  defs.appendChild(marker);

  // Glow filter
  const filter = document.createElementNS('http://www.w3.org/2000/svg', 'filter');
  filter.setAttribute('id', 'glow');
  filter.setAttribute('x', '-50%');
  filter.setAttribute('y', '-50%');
  filter.setAttribute('width', '200%');
  filter.setAttribute('height', '200%');
  const feGaussian = document.createElementNS('http://www.w3.org/2000/svg', 'feGaussianBlur');
  feGaussian.setAttribute('stdDeviation', '4');
  feGaussian.setAttribute('result', 'coloredBlur');
  filter.appendChild(feGaussian);
  const feMerge = document.createElementNS('http://www.w3.org/2000/svg', 'feMerge');
  const feMergeNode1 = document.createElementNS('http://www.w3.org/2000/svg', 'feMergeNode');
  feMergeNode1.setAttribute('in', 'coloredBlur');
  const feMergeNode2 = document.createElementNS('http://www.w3.org/2000/svg', 'feMergeNode');
  feMergeNode2.setAttribute('in', 'SourceGraphic');
  feMerge.appendChild(feMergeNode1);
  feMerge.appendChild(feMergeNode2);
  filter.appendChild(feMerge);
  defs.appendChild(filter);

  svg.appendChild(defs);

  // Scale nodes to fit
  const scaleX = width / 900;
  const nodes = PROJECT_DATA.nodes.map(n => ({
    ...n,
    cx: n.x * scaleX,
    cy: n.y
  }));

  const nodeMap = {};
  nodes.forEach(n => nodeMap[n.id] = n);

  // Draw edges
  PROJECT_DATA.edges.forEach(edge => {
    const source = nodeMap[edge.from];
    const target = nodeMap[edge.to];
    if (!source || !target) return;

    const dx = target.cx - source.cx;
    const dy = target.cy - source.cy;
    const dist = Math.sqrt(dx * dx + dy * dy);
    const nx = dx / dist;
    const ny = dy / dist;

    const startX = source.cx + nx * source.radius;
    const startY = source.cy + ny * source.radius;
    const endX = target.cx - nx * (target.radius + 10);
    const endY = target.cy - ny * (target.radius + 10);

    // Curved path
    const midX = (startX + endX) / 2;
    const midY = (startY + endY) / 2;
    const perpX = -(endY - startY) * 0.12;
    const perpY = (endX - startX) * 0.12;
    const ctrlX = midX + perpX;
    const ctrlY = midY + perpY;

    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    path.setAttribute('d', `M ${startX} ${startY} Q ${ctrlX} ${ctrlY} ${endX} ${endY}`);
    path.setAttribute('fill', 'none');

    const edgeColors = {
      request: '#93C5FD',
      response: '#86EFAC',
      call: '#C4B5FD',
      import: '#D4D4D8',
      data: '#FCA5A5'
    };
    path.setAttribute('stroke', edgeColors[edge.type] || '#D4D4D8');
    path.setAttribute('stroke-width', edge.type === 'import' ? '1.5' : '2');
    path.setAttribute('stroke-dasharray', edge.type === 'import' ? '6 4' : 'none');
    path.setAttribute('marker-end', 'url(#arrowhead)');
    path.setAttribute('opacity', '0.7');
    svg.appendChild(path);

    // Edge label
    const labelX = ctrlX;
    const labelY = ctrlY - 8;
    const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
    text.setAttribute('x', labelX);
    text.setAttribute('y', labelY);
    text.setAttribute('text-anchor', 'middle');
    text.setAttribute('font-size', '10');
    text.setAttribute('fill', '#9CA3AF');
    text.setAttribute('font-family', 'Noto Sans SC, sans-serif');
    text.textContent = edge.label;
    svg.appendChild(text);
  });

  // Draw nodes
  nodes.forEach(node => {
    const group = document.createElementNS('http://www.w3.org/2000/svg', 'g');
    group.setAttribute('cursor', 'pointer');
    group.setAttribute('data-node-id', node.id);

    // Glow circle
    const glow = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
    glow.setAttribute('cx', node.cx);
    glow.setAttribute('cy', node.cy);
    glow.setAttribute('r', node.radius + 6);
    glow.setAttribute('fill', node.color);
    glow.setAttribute('opacity', '0.15');
    glow.setAttribute('filter', 'url(#glow)');
    group.appendChild(glow);

    // Main circle
    const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
    circle.setAttribute('cx', node.cx);
    circle.setAttribute('cy', node.cy);
    circle.setAttribute('r', node.radius);
    circle.setAttribute('fill', '#FFFFFF');
    circle.setAttribute('stroke', node.color);
    circle.setAttribute('stroke-width', '2.5');
    group.appendChild(circle);

    // Inner colored circle
    const inner = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
    inner.setAttribute('cx', node.cx);
    inner.setAttribute('cy', node.cy);
    inner.setAttribute('r', node.radius - 6);
    inner.setAttribute('fill', node.color);
    inner.setAttribute('opacity', '0.12');
    group.appendChild(inner);

    // Label
    const label = document.createElementNS('http://www.w3.org/2000/svg', 'text');
    label.setAttribute('x', node.cx);
    label.setAttribute('y', node.cy + 1);
    label.setAttribute('text-anchor', 'middle');
    label.setAttribute('dominant-baseline', 'middle');
    label.setAttribute('font-size', node.radius > 34 ? '11' : '10');
    label.setAttribute('font-weight', '600');
    label.setAttribute('fill', node.color);
    label.setAttribute('font-family', node.type === 'external' ? 'Noto Sans SC, sans-serif' : 'JetBrains Mono, monospace');
    label.textContent = node.label;
    group.appendChild(label);

    // Hover events
    group.addEventListener('mouseenter', (e) => showTooltip(e, node));
    group.addEventListener('mouseleave', hideTooltip);

    // Drag events
    group.addEventListener('mousedown', (e) => {
      isDragging = true;
      dragNode = node;
      const svgRect = svg.getBoundingClientRect();
      dragOffset.x = e.clientX - svgRect.left - node.cx;
      dragOffset.y = e.clientY - svgRect.top - node.cy;
      e.preventDefault();
    });

    svg.appendChild(group);
  });

  // Drag handling
  svg.addEventListener('mousemove', (e) => {
    if (!isDragging || !dragNode) return;
    const svgRect = svg.getBoundingClientRect();
    dragNode.cx = e.clientX - svgRect.left - dragOffset.x;
    dragNode.cy = e.clientY - svgRect.top - dragOffset.y;
    // Update original data for redraw
    const original = PROJECT_DATA.nodes.find(n => n.id === dragNode.id);
    if (original) {
      original.x = dragNode.cx / scaleX;
      original.y = dragNode.cy;
    }
    drawGraph();
  });

  svg.addEventListener('mouseup', () => {
    isDragging = false;
    dragNode = null;
  });

  svg.addEventListener('mouseleave', () => {
    isDragging = false;
    dragNode = null;
  });
}

function showTooltip(event, node) {
  const tooltip = document.getElementById('nodeTooltip');
  const container = document.querySelector('.graph-container');
  const containerRect = container.getBoundingClientRect();

  const typeColors = {
    external: { bg: '#DBEAFE', text: '#1D4ED8', label: 'å¤–éƒ¨' },
    frontend: { bg: '#CCFBF1', text: '#0D9488', label: 'å‰ç«¯' },
    backend: { bg: '#EDE9FE', text: '#7C3AED', label: 'åç«¯' },
    ai: { bg: '#FEF3C7', text: '#D97706', label: 'AI' },
    data: { bg: '#FFE4E6', text: '#E11D48', label: 'æ•°æ®' },
    config: { bg: '#D1FAE5', text: '#059669', label: 'é…ç½®' }
  };

  const typeInfo = typeColors[node.type] || typeColors.config;

  tooltip.innerHTML = `
    <h4>
      ${node.label}
      <span class="tag" style="background:${typeInfo.bg};color:${typeInfo.text}">${typeInfo.label}</span>
    </h4>
    <p>${node.description}</p>
    <div class="analogy">ğŸ’¡ ${node.analogy}</div>
  `;

  const x = event.clientX - containerRect.left + 16;
  const y = event.clientY - containerRect.top - 20;

  tooltip.style.left = Math.min(x, containerRect.width - 360) + 'px';
  tooltip.style.top = y + 'px';
  tooltip.classList.add('visible');
}

function hideTooltip() {
  document.getElementById('nodeTooltip').classList.remove('visible');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LAYERED ARCHITECTURE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

function renderLayers() {
  const container = document.getElementById('layersContainer');
  container.innerHTML = '';

  PROJECT_DATA.layers.forEach((layer, index) => {
    // Connector arrow between layers
    if (index > 0) {
      const connector = document.createElement('div');
      connector.className = 'layer-connector';
      connector.innerHTML = `
        <svg width="40" height="36" viewBox="0 0 40 36">
          <path d="M20 0 L20 24 M14 18 L20 26 L26 18" stroke="#D4D4D8" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      `;
      container.appendChild(connector);
    }

    const layerEl = document.createElement('div');
    layerEl.className = `arch-layer ${layer.layerClass}`;
    layerEl.style.marginLeft = `${index * 20}px`;
    layerEl.style.marginRight = `${index * 20}px`;

    let componentsHtml = '';
    if (layer.components.length > 0) {
      componentsHtml = `
        <div class="layer-components">
          ${layer.components.map(c => `
            <div class="component-card">
              <h5>${c.name}</h5>
              <p>${c.desc}</p>
            </div>
          `).join('')}
        </div>
      `;
    }

    layerEl.innerHTML = `
      <div class="layer-header">
        <div class="layer-icon ${layer.iconClass}">${layer.icon}</div>
        <div>
          <div class="layer-title">${layer.name}</div>
          <div class="layer-subtitle">ç¬¬ ${index + 1} å±‚</div>
        </div>
      </div>
      <div class="layer-plain">${layer.plain}</div>
      ${componentsHtml}
    `;

    container.appendChild(layerEl);
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CHAT THEATER
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

let currentScenarioIndex = 0;
let chatTimer = null;
let visibleCount = 0;

function renderScenarioSelector() {
  const container = document.getElementById('scenarioSelector');
  container.innerHTML = PROJECT_DATA.scenarios.map((s, i) => `
    <button class="scenario-btn ${i === 0 ? 'active' : ''}" onclick="selectScenario(${i})">
      ${s.title}
      ${s.isCore ? '<span class="core-badge">æ ¸å¿ƒ</span>' : ''}
    </button>
  `).join('');
}

function selectScenario(index) {
  currentScenarioIndex = index;
  resetChat();

  document.querySelectorAll('.scenario-btn').forEach((btn, i) => {
    btn.classList.toggle('active', i === index);
  });

  const scenario = PROJECT_DATA.scenarios[index];
  document.getElementById('chatTitle').textContent = scenario.title;
  document.getElementById('chatDesc').textContent = scenario.description;

  renderChatCharacters(scenario);
  renderChatMessages(scenario);
}

function renderChatCharacters(scenario) {
  const container = document.getElementById('chatCharacters');
  container.innerHTML = scenario.characters.map(c => `
    <div class="character-badge">
      <div class="character-avatar" style="background:${c.color}">${c.name.charAt(0)}</div>
      <span>${c.name}</span>
    </div>
  `).join('');
}

function renderChatMessages(scenario) {
  const container = document.getElementById('chatMessages');
  const charMap = {};
  scenario.characters.forEach(c => charMap[c.id] = c);

  container.innerHTML = scenario.messages.map((msg, i) => {
    const fromChar = charMap[msg.from] || { name: '?', color: '#999' };
    const toChar = charMap[msg.to] || { name: '?', color: '#999' };

    return `
      <div class="chat-message" id="msg-${i}">
        <div class="msg-avatar" style="background:${fromChar.color}">${fromChar.name.charAt(0)}</div>
        <div class="msg-body">
          <div class="msg-meta">
            <span class="msg-name" style="color:${fromChar.color}">${fromChar.name}</span>
            <span class="msg-arrow">â†’</span>
            <span class="msg-name" style="color:${toChar.color}">${toChar.name}</span>
          </div>
          <div class="msg-bubble">${msg.content}</div>
          ${msg.ref ? `<div class="msg-ref">ğŸ“ ${msg.ref}</div>` : ''}
        </div>
      </div>
    `;
  }).join('');
}

function playChat() {
  const scenario = PROJECT_DATA.scenarios[currentScenarioIndex];
  if (visibleCount >= scenario.messages.length) {
    resetChat();
  }

  chatTimer = setInterval(() => {
    if (visibleCount >= scenario.messages.length) {
      clearInterval(chatTimer);
      chatTimer = null;
      return;
    }
    const msgEl = document.getElementById(`msg-${visibleCount}`);
    if (msgEl) {
      msgEl.classList.add('visible');
      msgEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }
    visibleCount++;
  }, 800);
}

function pauseChat() {
  if (chatTimer) {
    clearInterval(chatTimer);
    chatTimer = null;
  }
}

function resetChat() {
  pauseChat();
  visibleCount = 0;
  document.querySelectorAll('.chat-message').forEach(el => el.classList.remove('visible'));
}

function showAllChat() {
  pauseChat();
  const scenario = PROJECT_DATA.scenarios[currentScenarioIndex];
  visibleCount = scenario.messages.length;
  document.querySelectorAll('.chat-message').forEach(el => el.classList.add('visible'));
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TERMS DICTIONARY
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

function renderTerms() {
  const container = document.getElementById('termsGrid');
  container.innerHTML = PROJECT_DATA.terms.map((t, i) => `
    <div class="term-card" id="term-${i}" onclick="toggleTerm(${i})">
      <h4>
        ${t.term}
        <span class="term-tag">${t.related}</span>
      </h4>
      <div class="term-plain">${t.plain}</div>
      <div class="term-analogy">ğŸ’¡ ${t.analogy}</div>
    </div>
  `).join('');
}

function toggleTerm(index) {
  const card = document.getElementById(`term-${index}`);
  card.classList.toggle('expanded');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

window.addEventListener('DOMContentLoaded', () => {
  drawGraph();
  renderLayers();
  renderScenarioSelector();
  selectScenario(0);
  renderTerms();
});

window.addEventListener('resize', () => {
  if (document.querySelector('[data-tab="graph"]').classList.contains('active')) {
    drawGraph();
  }
});
</script>
</body>
</html>
